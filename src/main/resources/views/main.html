<!DOCTYPE html>
<html lang="en" style="height: 100%;">
<head>
    <meta charset="UTF-8">
    <title>主页</title>
    <link rel="stylesheet" type="text/css" href="../static/ext5.0.0/packages/ext-theme-classic/build/resources/ext-theme-classic-all.css">
    <link rel="stylesheet" type="text/css" href="/ext5.0.0/packages/ext-theme-classic/build/resources/ext-theme-classic-all.css">
    <script type="text/javascript" src="../static/ext5.0.0/ext-all.js"></script>
    <script type="text/javascript" src="/ext5.0.0/ext-all.js"></script>
    <link rel="stylesheet" href="/bootstrap-3.3.7/css/bootstrap.min.css">
</head>
<body style="height: 100%;">
<script type="text/javascript">
    var username='';
    function getusername() {
        Ext.Ajax.request({
                url:'/authorized/getusername',
                method:'get',
                success:function (response, options) {
                    username=Ext.util.JSON.decode(response.responseText).username;
                    createView();
                },
                failure:function () {
                    createView();
                }
            }
        );
    };
    function initMain() {
        Ext.MessageBox.wait("正在加载页面，请稍候...", "等待");
        getusername();
    };
    Ext.onReady(function () {
        initMain();
    });
    function createView() {
        Ext.MessageBox.close();
        Ext.create('Ext.container.Viewport',{
            layout:'border',
            items:[
                {
                    region:'north',
                    xtype:'panel',
                    height:50,
                    id:'northArea',
                    html:'<div style="color: springgreen;background-color:skyblue;font-size: 20px;height: 100%;">Spring Boot Model</div>',
                    rbar:[
                        {xtype:'tbfill'},
                        {
                            id:'userInfo',
                            text:username,
                            scale:'medium',
                            menu:[
                                {
                                    text:'退出登录',
                                    xtype:'button',
                                    handler:function () {
                                        location.href='/logout'
                                    }
                                }
                            ]
                        },
                        {xtype:'tbfill'}
                    ]
                }
            ]
        });
    };
</script>
</body>
</html>